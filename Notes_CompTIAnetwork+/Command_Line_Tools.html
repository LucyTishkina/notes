<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Command Line Tools</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">Command Line Tools</h1><br/>ping<br />- test reachability<br />   → determine round-trip time<br />   → uses Internet Control Message Protocol (ICMP)<br />- One of your primary troubleshooting tools<br />   → can you ping the host?<br />- written by Mike Muuss in 1983<br />   → the sound made by sonar<br />   → not an acronym for Packet INternet Groper<br />      ⇒ a backronym<br /><br />traceroute<br />- determine the route a packet takes to a destination<br />   → map the entire path<br />   → tracert (Windows) traceroute (POSIX)<br />- take advantage of ICMP Time to Live Exceeded error message<br />   → the time in TTL refers to hops, not seconds or minutes<br />   → TTL=1 is the first router, TTL=2 is the second router, etc.<br />- Not all devices will reply with ICMP Time Exceeded messages<br />   → some firewalls filter ICMP<br />   → ICMP is low-priority for many devices<br /><br />Flavours of traceroute<br />- not all traceroutes are the same<br />   → minor differences in the transmitted payload<br />- Windows commonly sends ICMP echo requests<br />   → receives ICMP time exceeded messages<br />   → And an ICMP echo reply from the final/destination device<br />   → unfortunately, outgoing ICMP is commonly filtered<br />- some operating system allow you to specify the protocol used<br />   → Linux, Unix, Mac OS, etc.<br />- IOS devices send UDP datagrams over port 33434<br />   → the port number can be changed with extended options<br /><br />The mechanics of traceroute<br />- tracing route to 10.10.30.10 over a max of 30 hops:<br /><br />1 2ms 10.10.10.1<br />2 1ms 172.16.1.2<br />3 1ms 172.16.3.1<br />4 4ms  10.10.30.10<br /><br />.10                   Subnet 10.10.10.0/24                           Subnet 172.16.1.0/24          Subnet 172.16.3.0/24                              Subnet 10.10.30.0/24         .10<br />                                                                    g0/0            g0/1                      g0/0       s0/3/1                s0/3/1            g0/1<br />Sam ------------------------ Switch 1 --------------------------- Router 1 ---------------------------- Router 3 ------------------------------- Router 4 ------------------------ Switch 3 ------------------- Jack<br /><br /><br />- increase TTL on subsequent calls, each router decreases TTL before passing along the packet<br />- when the TTL is exceeded the ICMP call returns with an IP address and the TTL gives the time to that device<br /><br />nslookup and dig<br />- lookup information from DNS servers<br />   → canonical names, IP addresses, cache timers, etc.<br />- nslookup<br />   → both Windows and POSIX-based<br />   → lookup names and IP addresses<br />   → deprecated (use dig instead)<br />- dig (Domain Information Groper)<br />   → more advanced domain information<br />   → probably your first choice<br />   → Windows - does not have a native installation<br /><br />ipconfig and ifconfig<br />- most of your troubleshooting starts with your IP address<br />   → ping your local router/gateway<br />- determine TCP/IP and network adapter information<br />   → and some additional IP details<br />   → subnet, etc.<br />- ipconfig - Windows<br />- ifconfig - Linux<br /><br />iptables<br />- stateful firewall<br />   → linux iptables - filter packets in the kernel<br />   → usually placed on a device or server<br />- firewall functions<br />   → advanced filtering by IP address, port, application, content<br />   → usually located on the ingress/egress of a network<br />   → some organizations place them between internal networks<br />   → some Linux distributions prefer firewalled or similar host-based firewalls over iptables<br /><br />netstat<br />- network statistics<br />   → many different OS's<br />- netstat -a<br />   → show all active connections<br />- netstat -b<br />   → Show binaries (Windows)<br />- netstat -n<br />   → do not resolve names<br /><br />tcpdump<br />- capture packets from the command line<br />   → very convenient<br />- available in most Unix/Linux OS's<br />   → included with MAC OS, available on Windows (WinDump)<br />- Apply filters, view in real-time<br />   → quickly identify traffic patterns<br />- Save the data, use in another application<br />   → written in standard pcap format<br />- can be an overwhelming amount of data<br />   → takes a bit of practice to parse and filter<br /><br />pathping<br />- combine ping and traceroute<br />   → included with Windows NT and later<br />- first phase runs a traceroute<br />   → build a map<br />- second phase<br />   → measure round trip time and packet loss at each hop<br /><br />Nmap<br />- network mapper<br />   → find and learn more about network devices<br />- Port scan<br />   → find devices and identify open ports<br />- Operating system scan<br />   → discover the OS without logging in to a device<br />- Service scan<br />   → what service is available on a device? Name, version, details<br />- additional scripts<br />   → nmap scripting engine (NSE) - extend capabilities, vulnerability scans<br /><br />route<br />- view the device's routing table<br />   → find out which way the packets will go<br />- Windows route print<br /><br />Address Resolution Protocol<br />- Determines a MAC address based on an IP address<br />   → you need the hardware address to communicate<br />- arp -a<br />   → view local ARP table<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div></body></html>